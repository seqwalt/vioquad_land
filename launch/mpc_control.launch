<launch>
    
    <!-- Gazebo config -->
    <arg name="simulation" default="false" />
    
    <!-- Controller config -->
    <arg name="controller" default="mpc" /> <!-- options: geometric, position, mpc -->
    
    <!-- Controller node -->
    <node pkg="quad_control" name="mavros_cmd_node" type="mavros_cmd_node" output="screen" required="true">
        <param name="ctrl_mode" type="string" value="$(arg controller)" />
        <param name="enable_sim" value="$(arg simulation)" />
    </node>

    <!-- MPC node -->
    <?ignore <node pkg="quad_control" name="mpc_node" type="mpc_node" output="screen" required="true" launch-prefix="gdb -ex run --args" /> ?>
    <node pkg="quad_control" name="mpc_node" type="mpc_node" output="screen" required="true" />

</launch>

